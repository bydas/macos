<style type="text/css">
  .password-logo {
    max-width: {{ settings.logo_width }}px;
  }
</style>

<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="password-header">
    {%- if settings.logo != blank -%}
      {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
      {%- assign logo_height = settings.logo_width | divided_by: settings.logo.aspect_ratio -%}
      {{
        settings.logo
        | image_url: width: 500
        | image_tag:
          class: 'password-logo',
          widths: '50, 100, 150, 200, 250, 300, 400, 500',
          width: settings.logo_width,
          height: logo_height,
          alt: logo_alt
      }}
    {%- else -%}
      <h1 class="h2">{{ shop.name }}</h1>
    {%- endif -%}

    {%- if shop.password_message != blank -%}
      <div class="password-content">
        {{ shop.password_message }}
      </div>
    {%- endif -%}

    <password-modal>
      <details class="password-modal modal">
        <summary class="modal__toggle" aria-haspopup="dialog">
          <div class="modal__toggle-open password-link link underlined-link">
            <span class="svg-wrapper">
              {{- 'icon-padlock.svg' | inline_asset_content -}}
            </span>
            {{ 'general.password_page.login_password_button' | t }}
          </div>
          <div class="modal__toggle-close" aria-hidden="true">
            <span class="svg-wrapper">
              {{- 'icon-close.svg' | inline_asset_content -}}
            </span>
          </div>
        </summary>
        <div
          class="modal__content"
          role="dialog"
          aria-labelledby="DialogHeading"
          aria-modal="true"
        >
          <div class="password-modal__content" tabindex="-1">
            <button type="button" class="modal__close-button link" aria-label="{{ 'accessibility.close' | t }}">
              <span class="svg-wrapper">
                {{- 'icon-close.svg' | inline_asset_content -}}
              </span>
            </button>
            <h2 class="password-modal__content-heading" id="DialogHeading">
              {{ 'general.password_page.login_form_heading' | t }}
            </h2>
            {%- form 'storefront_password', class: 'password-form' -%}
              <div class="password_wrapper">
                <div class="password-field field{% if form.errors %} password-field--error{% endif %}">
                  <input
                    type="password"
                    name="password"
                    id="Password"
                    class="field__input"
                    autocomplete="current-password"
                    {% if form.errors %}
                      aria-invalid="true"
                      aria-describedby="PasswordLoginForm-password-error"
                    {%- endif -%}
                    placeholder="{{ 'general.password_page.login_form_password_placeholder' | t }}"
                  >
                  <label class="field__label" for="{{ 'general.password_page.login_form_password_label' | t }}">
                    {{- 'general.password_page.login_form_password_placeholder' | t -}}
                  </label>
                  {%- if form.errors -%}
                    <div id="PasswordLoginForm-password-error" role="status">
                      <span class="visually-hidden">{{ 'accessibility.error' | t }}</span>
                      <span class="form__message">
                        <span class="svg-wrapper">
                          {{- 'icon-error' | inline_asset_content -}}
                        </span>
                        {{ 'general.password_page.login_form_error' | t -}}
                      </span>
                    </div>
                  {%- endif -%}
                  <button class="view-password-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" class="password-visible d-none">
                      <path d="M320 128C179.2 128 90.7 256 64 320C90.7 384 179.2 512 320 512C460.8 512 549.3 384 576 320C549.3 256 460.8 128 320 128zM127.4 176.6C174.5 132.8 239.2 96 320 96C400.8 96 465.5 132.8 512.6 176.6C559.4 220.1 590.7 272 605.6 307.7C608.9 315.6 608.9 324.4 605.6 332.3C590.7 368 559.4 420 512.6 463.4C465.5 507.1 400.8 544 320 544C239.2 544 174.5 507.2 127.4 463.4C80.6 419.9 49.3 368 34.4 332.3C31.1 324.4 31.1 315.6 34.4 307.7C49.3 272 80.6 220 127.4 176.6zM320 416C373 416 416 373 416 320C416 276.7 387.3 240.1 347.9 228.1C350.6 236.9 352 246.3 352 256C352 309 309 352 256 352C246.3 352 236.9 350.6 228.1 347.9C240 387.3 276.7 416 320 416zM192.2 327.8C192 325.2 192 322.6 192 320C192 307.8 193.7 296.1 196.9 285C197.2 284.1 197.4 283.2 197.7 282.3C210.1 241.9 242 210.1 282.4 197.6C294.3 193.9 307 192 320.1 192C322.6 192 325.1 192.1 327.5 192.2L327.9 192.2C395 196.2 448.1 251.9 448.1 320C448.1 390.7 390.8 448 320.1 448C252 448 196.3 394.8 192.3 327.8zM224.3 311.7C233.6 317 244.4 320.1 255.9 320.1C291.2 320.1 319.9 291.4 319.9 256.1C319.9 244.6 316.9 233.8 311.5 224.5C265.1 228.5 228.2 265.4 224.2 311.8z"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" class="password-hidden">
                      <path d="M59.3 36.8C53.1 30.6 42.9 30.6 36.7 36.8C30.5 43 30.5 53.2 36.7 59.4L580.7 603.4C586.9 609.6 597.1 609.6 603.3 603.4C609.5 597.2 609.5 587 603.3 580.8L498.4 475.9C503.3 471.8 508 467.7 512.5 463.4C559.3 419.9 590.6 368 605.5 332.3C608.8 324.4 608.8 315.6 605.5 307.7C590.6 272 559.3 220 512.5 176.6C465.4 132.9 400.7 96 319.9 96C259.9 96 208.8 116.3 167.1 144.7L59.3 36.8zM190.3 167.8C226.7 144.1 270 128 320 128C460.8 128 549.3 256 576 320C562.7 352 533.9 400 490.8 440C485.9 444.5 480.9 448.9 475.7 453.2L421.1 398.6C438 376.9 448 349.7 448 320.1C448 249.4 390.7 192.1 320 192.1C290.4 192.1 263.1 202.1 241.5 219L190.3 167.8zM398.2 375.7L264.3 241.8C280 230.6 299.2 224 320 224C373 224 416 267 416 320C416 340.8 409.4 360 398.2 375.7zM106.8 197.3C71.3 235.8 47.1 277.5 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C360.7 544 397.2 534.7 429.5 519.9L405 495.5C379.2 505.8 350.9 512 320 512C179.2 512 90.7 384 64 320C75.2 293.2 97.2 255.1 129.4 219.9L106.8 197.3z"/>
                    </svg>
                  </button>
                </div>
              </div>
              <button name="commit" class="password-button button button--outline">
                {{ 'general.password_page.login_form_submit' | t }}
              </button>
            {%- endform -%}
            <small class="password__footer-text">{{ 'general.password_page.admin_link_html' | t }}</small>
          </div>
        </div>
      </details>
    </password-modal>
  </div>
</div>
{% assign scheme1 = settings.color_schemes | first %}
{%- if section.settings.color_scheme == scheme1 -%}<hr>{%- endif -%}

{% schema %}
{
  "name": "t:sections.main-password-header.name",
  "settings": [
    {
      "type": "paragraph",
      "content": "t:sections.main-password-header.settings.logo_help.content"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    }
  ]
}
{% endschema %}
